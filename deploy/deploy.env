#!/bin/bash
# =============================================================================
# AXON Cloud Deployment Configuration
# =============================================================================
# This file contains all configurable values for deploying AXON to the cloud.
# Modify these values to customize your deployment.
# =============================================================================

# -----------------------------------------------------------------------------
# GCP Cloud Run Configuration
# -----------------------------------------------------------------------------
export GCP_PROJECT_ID="wecrew-axon"
export GCP_REGION="us-west1"

# Backend Service
export BACKEND_SERVICE_NAME="axon-backend"
export BACKEND_MEMORY="1Gi"
export BACKEND_CPU="1"
export BACKEND_MIN_INSTANCES="0"
export BACKEND_MAX_INSTANCES="10"

# Orchestrator Service
export ORCHESTRATOR_SERVICE_NAME="axon-orchestrator"
export ORCHESTRATOR_MEMORY="512Mi"
export ORCHESTRATOR_CPU="1"
export ORCHESTRATOR_MIN_INSTANCES="1"  # Must be 1 for Temporal worker
export ORCHESTRATOR_MAX_INSTANCES="3"

# -----------------------------------------------------------------------------
# Fly.io Configuration (Temporal)
# -----------------------------------------------------------------------------
export FLY_APP_NAME="wecrew-temporal"
export FLY_REGION="lax"

# Temporal Address (derived from Fly app name)
export TEMPORAL_ADDRESS="${FLY_APP_NAME}.fly.dev:7233"

# -----------------------------------------------------------------------------
# Vercel Configuration (Frontend)
# -----------------------------------------------------------------------------
export VERCEL_PROJECT_NAME="axon-wecrew"

# -----------------------------------------------------------------------------
# Service URLs (auto-generated from above configs)
# -----------------------------------------------------------------------------
export BACKEND_URL="https://${BACKEND_SERVICE_NAME}-${GCP_PROJECT_ID}.${GCP_REGION}.run.app"
export FRONTEND_URL="https://${VERCEL_PROJECT_NAME}.vercel.app"

# -----------------------------------------------------------------------------
# Firebase Configuration (Frontend Auth)
# -----------------------------------------------------------------------------
export NEXT_PUBLIC_FIREBASE_API_KEY="AIzaSyBnv1WU2SVdUUJyDX0t72CYgPesbEGahig"
export NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN="wecrew-axon.firebaseapp.com"
export NEXT_PUBLIC_FIREBASE_PROJECT_ID="wecrew-axon"
export NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET="wecrew-axon.firebasestorage.app"
export NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID="939141842975"
export NEXT_PUBLIC_FIREBASE_APP_ID="1:939141842975:web:fd19d669f6ac4833a82d2a"
export NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID="G-MS7YJW16NG"

# -----------------------------------------------------------------------------
# Database & Cache (loaded from .env file)
# These are loaded from the main .env file for security
# -----------------------------------------------------------------------------
# DATABASE_URL - PostgreSQL connection string (from .env)
# REDIS_URL - Redis connection string (from .env)
# JWT_SECRET - JWT signing secret (from .env)
# FIREBASE_PROJECT_ID - Firebase project ID (from .env)
# FIREBASE_CLIENT_EMAIL - Firebase service account email (from .env)
# FIREBASE_PRIVATE_KEY - Firebase private key (from .env)

echo "Deployment configuration loaded:"
echo "  GCP Project: ${GCP_PROJECT_ID}"
echo "  GCP Region: ${GCP_REGION}"
echo "  Backend URL: ${BACKEND_URL}"
echo "  Frontend URL: ${FRONTEND_URL}"
echo "  Temporal: ${TEMPORAL_ADDRESS}"
